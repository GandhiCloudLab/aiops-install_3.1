
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# ADAPT VALUES
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



# SLACK TOKEN (User OAuth Token - must start with xoxp-*)
export SLACK_TOKEN=xoxp-13394360481-13391768003-1813362372052-434319b3be323fba43198bd73cfac471

export SLACK_PROACTIVE=".*proactive.*"
export SLACK_REACTIVE=".*reactive.*"


#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# DO NOT EDIT BELOW
#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------









































                       


menu_option_1() {
  echo "üí• üß® üí•  Cleaning up data Slack Channel $SLACK_PROACTIVE üí• üß® üí• "
  echo "This will NOT delete pinned messages"

  export SLACK_CHANNEL=$SLACK_PROACTIVE

  read -p "‚ùó Are you really, really, REALLY sure you want to delete all messages from the Slack Channel $SLACK_PROACTIVE? [y,N] " DO_COMM
  if [[ $DO_COMM == "y" ||  $DO_COMM == "Y" ]]; then
    python3 ./slack-cleaner.py
    echo "      ‚úÖ OK"
  else
    echo "      ‚ùå Aborted"
  fi
}


menu_option_2() {
  echo "üí• üß® üí•  Cleaning up data Slack Channel $SLACK_REACTIVE üí• üß® üí• "
  echo "This will NOT delete pinned messages"

  export SLACK_CHANNEL=$SLACK_REACTIVE

  read -p "‚ùó Are you really, really, REALLY sure you want to delete all messages from the Slack Channel $SLACK_REACTIVE? [y,N] " DO_COMM
  if [[ $DO_COMM == "y" ||  $DO_COMM == "Y" ]]; then
    python3 ./slack-cleaner.py
    echo "      ‚úÖ OK"
  else
    echo "      ‚ùå Aborted"
  fi
}





clear

echo "   __________  __ ___       _____    ________            "
echo "  / ____/ __ \/ // / |     / /   |  /  _/ __ \____  _____"
echo " / /   / /_/ / // /| | /| / / /| |  / // / / / __ \/ ___/"
echo "/ /___/ ____/__  __/ |/ |/ / ___ |_/ // /_/ / /_/ (__  ) "
echo "\____/_/      /_/  |__/|__/_/  |_/___/\____/ .___/____/  "
echo "                                          /_/            "
echo ""

echo "***************************************************************************************************************************************************"
echo "***************************************************************************************************************************************************"
echo " üöÄ CP4WAIOPS CLEAR SLACK"
echo "***************************************************************************************************************************************************"

echo "  Initializing......"

echo "  Checking K8s connection......"
checkK8sConnection

echo "***************************************************************************************************************************************************"
echo "  "


until [ "$selection" = "0" ]; do
  
  echo ""
  
  echo ""
  echo ""
  echo "  ‚ùå DELETE SLACK CHANNELS"
  echo "      1  -  Delete Slack channel $SLACK_PROACTIVE messages (DANGER ZONE)"
  echo "      2  -  Delete Slack channel $SLACK_REACTIVE messages (DANGER ZONE)"
  echo ""
  echo "    	0  -  Exit"
  echo ""
  echo "  Enter selection: "
  read selection
  echo ""
  case $selection in
    1 ) clear ; menu_option_1  ;;
    2 ) clear ; menu_option_2  ;;
    0 ) clear ; exit ;;
    * ) clear ; incorrect_selection  ;;
  esac
done







